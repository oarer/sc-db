# Stalcraft Database Merger

Автоматизированная система для скачивания, обработки и объединения базы данных предметов из EXBO-Studio/stalcraft-database. Проект извлекает JSON-данные из GitHub-репозитория, объединяет базовые версии предметов с их вариантами и предоставляет готовую структурированную базу данных.

---

## Требования

### Docker

---

## Установка

### 1. Клонирование репозитория

```bash
git clone https://github.com/oarer/sc-db
cd sc-db
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
GITHUB_TOKEN="YOUR GHP TOKEN"
SYNC_TOKEN="RANDOM"

PROXY=false/true
```

### 3. Запуск

```bash
# Запуск всех сервисов
docker-compose up -d

# Перезапуск сервисов
docker-compose restart

# Остановка и удаление контейнеров
docker-compose down
```

### API синхронизации

Для принудительной синхронизации изменений с Git:

```bash
curl -X POST http://localhost:3001/sync \
  -H "x-sync-token: your_sync_token" \
  -H "Content-Type: application/json"
```

Ответы:

-   `no changes` - нет изменений для коммита
-   `pushed` - изменения успешно отправлены в Git
-   `busy` - синхронизация уже выполняется
-   `error` - ошибка при синхронизации

---

## Структура проекта

```
sc-db/
├── parser/                    # Модуль обработки данных
├── sync/                      # Модуль синхронизации с Git
├── merged/                    # Результат обработки
├── items/                     # Официальная база данных
└── docker-compose.yml         # Docker конфигурация
```

### Структура данных

```
./merged/                     # Обработанная база данных
├── <category>/
│   ├── weapon_xyz.json       # Объединенный предмет
│   └── ...                   # Другие предметы
└── icons/                    # Иконки
```

---

## Вклад в проект

### Внесение изменений

1. Форкните репозиторий
2. Создайте ветку для изменений
3. Внесите изменения
4. Отправьте pull request

---

## Лицензия и поддержка

Проект распространяется под лицензией CC BY-NC 4.0. Для вопросов и поддержки:

-   Создайте issue в GitHub репозитории
-   Проверьте существующие issues перед созданием нового
